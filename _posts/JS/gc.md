---
title: 垃圾回收机制
tags:
  - js
location: fish
summary:
---

## 垃圾回收算法

### 标记清除

- 标记： 从根节点开始标记出依旧在使用的对象
- 清除： 清除没有被标记的其他所有对象

-缺点： 会导致内存碎片化，内存利用率不高，因为每次都要从根节点进行标记，效率也不高

### copy

按照 8:1:1 的比例分为 A, B1，B2 两个区域，

- 第一次回收

当变量创建的时候丢入 A 区域（伊甸园区）， 当 A 区域内存占满之后开始垃圾回收

将依旧在使用的对象直接丢入 B1 区域（幸存者区域）， 然后整体释放 A 区域。

- 第二次回收

新变量创建依旧是丢入 A 区域， 当 A 区域占满之后， 垃圾回收 A 和 B1 区域， 将仍然在使用的对象扔进 B2 区域， 同步释放 A 和 B1 区域

- 第三次回收

新变量创建依旧是丢入 A 区域， 当 A 区域占满之后， 垃圾回收 A 和 B2 区域，， 将仍然在使用的对象扔进 B1 区域， 同步释放 A 和 B2 区域

之后的每次回收都和重复上面的流程， b1 和 b2 每次回收后，都会有一个被释放

### 标记整理

和标记清除法类似， 但是他整理了内存碎片，内存使用效率比标记清除法高， 但是效率还是不如 copy

### 二代算法

二代指的是新生代 和 老生代， 新生代会对应自己的垃圾回收器， 老生代也会有一个对应的垃圾回收器，他们都是配套使用的

#### 新生代

新生代中执行 copy 算法

#### 老生代

老生代中执行标记整理方法

### 增量回收算法
